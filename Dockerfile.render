# Dockerfile simplificado para Render.com
FROM n8nio/n8n:latest

# Instalar dependências adicionais
USER root
RUN apk add --no-cache curl postgresql-client

# Voltar para usuário n8n
USER node

# Instalar pacote community do Evolution API
ENV N8N_COMMUNITY_PACKAGES=n8n-nodes-evolution-api

# Configurações de produção
ENV NODE_ENV=production
ENV N8N_LOG_LEVEL=info
ENV N8N_METRICS=true

# Expor porta
EXPOSE 5678

# Comando de inicialização
CMD ["n8n", "start"]